<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品到期提醒系统</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leancloud-storage@4.15.0/dist/av-min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>商品到期提醒系统</h1>
        </header>

        <main>
            <!-- 商品输入表单 -->
            <section class="form-section">
                <h2>添加商品</h2>
                <form id="productForm">
                    <div class="form-group">
                        <label for="barcode">商品条码:</label>
                        <input type="text" id="barcode" name="barcode" placeholder="扫描或输入条码" required>
                    </div>
                    <div class="form-group">
                        <label for="productName">商品名称:</label>
                        <input type="text" id="productName" name="productName" placeholder="自动带出或手动输入" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="productionDate">生产日期:</label>
                            <input type="date" id="productionDate" name="productionDate">
                        </div>
                        <div class="form-group">
                            <label for="shelfLife">保质期(月):</label>
                            <input type="number" id="shelfLife" name="shelfLife" min="1" placeholder="输入月份">
                        </div>
                        <div class="form-group">
                            <label for="validity">有效期:</label>
                            <input type="date" id="validity" name="validity" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">添加商品</button>
                </form>
            </section>

            <!-- 功能按钮 -->
            <section class="controls">
                <button id="exportBtn" class="btn btn-secondary">导出CSV</button>
                <input type="file" id="importFile" accept=".csv" style="display: none;">
                <button id="importBtn" class="btn btn-secondary">导入CSV</button>
                <button id="clearBtn" class="btn btn-danger">清空所有数据</button>
                <button id="syncBtn" class="btn btn-info">同步数据</button>
                <button id="fetchBtn" class="btn btn-success">获取最新数据</button>
                <button id="filterBtn" class="btn btn-warning">筛选1个月内到期商品</button>
            </section>

            <!-- 图表展示 -->
            <section class="chart-section">
                <h2>到期日期分布</h2>
                <canvas id="expiryChart"></canvas>
            </section>

            <!-- 商品列表 -->
            <section class="list-section">
                <h2>商品列表</h2>
                <div class="search-controls">
                    <input type="text" id="productSearch" placeholder="搜索商品名称或条码">
                    <button id="productSearchBtn" class="btn btn-secondary">搜索</button>
                    <button id="productClearSearchBtn" class="btn btn-secondary">清空</button>
                </div>
                <table id="productTable">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>条码</th>
                            <th>名称</th>
                            <th>类型</th>
                            <th>扫描日期</th>
                            <th>生产日期</th>
                            <th>保质期(月)</th>
                            <th>有效期</th>
                            <th>状态</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 商品数据将通过JavaScript动态添加 -->
                    </tbody>
                </table>
            </section>

            <!-- 商品条码映射管理 -->
            <section class="mapping-section">
                <h2>条码-名称映射管理</h2>
                <div class="search-controls">
                    <input type="text" id="mappingSearch" placeholder="搜索商品名称或条码">
                    <button id="mappingSearchBtn" class="btn btn-secondary">搜索</button>
                    <button id="mappingClearSearchBtn" class="btn btn-secondary">清空</button>
                </div>
                <div class="mapping-controls">
                    <input type="text" id="newBarcode" placeholder="新条码">
                    <input type="text" id="newProductName" placeholder="商品名称">
                    <button id="addMappingBtn" class="btn btn-primary">添加映射</button>
                </div>
                <table id="mappingTable">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>条码</th>
                            <th>商品名称</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 映射数据将通过JavaScript动态添加 -->
                    </tbody>
                </table>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>